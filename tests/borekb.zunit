#!/usr/bin/env zunit

AGKOZAK_ZPML_RPROMPT=()

@test 'Testing borekb theme in color and monochrome' {
	load ../agkozak-zsh-theme.plugin.zsh


	AGKOZAK_ZPML_PROMPT=(
	  if is_exit_0 then
	  else
	    bold fg_red exit_status unfg unbold space
	  fi

	  bold fg_blue pwd unfg unbold

	  fg_243 git_branch_status unfg newline

	  if is_superuser then
	    literal '#'
	  else
	    literal '$'
	  fi
	  space
	)

	AGKOZAK_HAS_COLORS=1

	[[ "$(_agkozak_construct_prompt AGKOZAK_ZPML_PROMPT)" == $'%(?..%B%F{red}(%?%)%f%b )%B%F{blue}%2v%f%b%F{243}%3v%f\n%(!.#.$) ' ]]

	assert $state equals 0

	AGKOZAK_HAS_COLORS=0

	[[ "$(_agkozak_construct_prompt AGKOZAK_ZPML_PROMPT)" == $'%(?..%B(%?%)%b )%B%2v%b%3v\n%(!.#.$) ' ]]

	assert $state equals 0
}
